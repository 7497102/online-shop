{% load store_tags %}
{% get_sorted as data %}
{% get_subcategories main_category as categories %}

<div class="dropdown pt-2 pt-lx-0">
    <button class="products_filter-dropdown dropdown-toggle" type="button"
            id="dropdownColorType" data-bs-toggle="dropdown" aria-expanded="false">
        По цвету
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownColorType">
        {% for color in colors %}
        <li><a class="dropdown-item" href="?color={{ color.title }}">{{ color.title }}</a></li>
        {% endfor %}
    </ul>
</div>

<div class="dropdown pt-2 pt-lx-0">
    <button class="products_filter-dropdown dropdown-toggle" type="button"
            id="dropdownMaterialType" data-bs-toggle="dropdown" aria-expanded="false">
        По материалу
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMaterialType">
        {% for material in materials %}
        <li><a class="dropdown-item" href="?material={{ material.title }}">{{ material.title }}</a></li>
        {% endfor %}
    </ul>
</div>

{% for key in data %}
<div class="dropdown pt-2 pt-lx-0">
    <button class="products_filter-dropdown dropdown-toggle" type="button" id="dropdownPrice"
            data-bs-toggle="dropdown" aria-expanded="false">
        {{ key.title }}
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownPrice">
        {% for sorter in key.sorters %}
        <li><a class="dropdown-item" href="?sort={{ sorter.0 }}">{{ sorter.1 }}</a></li>
        {% endfor %}
    </ul>
</div>
{% endfor %}



<div class="dropdown pt-2 pt-lx-0">
    <button class="products_filter-dropdown dropdown-toggle" type="button"
            id="dropdownWatchType" data-bs-toggle="dropdown" aria-expanded="false">
        Подкатегории: {{ main_category.title }}
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownWatchType">
        {% for category in categories %}
        <li><a class="dropdown-item" href="?type={{ category.slug }}">{{ category.title }}</a></li>
        {% endfor %}
    </ul>
</div>